<div class="browse container">
    <div class="row">
        <div class="filters col-md-3">
            <div class="categories">
                <p>Categories</p>
                <p *ngIf="selectedCategory !== 'any'" class="remove" (click)="clearCategory()">remove</p>
                <div class="category {{selectedCategory === c.category.name ? 'active': ''}}" *ngFor="let c of (browseState | async).categories" (click)="selectCategory(c.category.name)">
                    {{c.category.name}}
                </div>
                <div *ngFor="let e of (browseState | async).errors">
                    <div *ngIf="e.errorEffect == 'FETCH_CATEGORY'" class="alert-warning">
                        <div *ngIf="e.error.status === 400 || e.error.status === 401">Problem loading categories...</div>
                        <div *ngIf="e.error.status === 500 || e.error.status === 0 ">Internal server error! Please contact our support team.
                        </div>
                    </div>
                </div>
            </div>
            <div class="price">
                <p>Price</p>
                <p *ngIf="minPrice !== '0' || maxPrice !== '0'" class="remove" (click)="clearPrice()">remove</p>
                <div class="row">
                    <div class="min col-md-4">
                        <p>Min Price</p>
                        <input type="number" (change)="selectMin($event.target.value)" value="{{minPrice !== '0' ? minPrice : ''}}">
                    </div>
                    <div class="max col-md-4">
                        <p>Max Price</p>
                        <input type="number" (change)="selectMax($event.target.value)" value="{{maxPrice !== '0' ? maxPrice : ''}}">
                    </div>
                    <div class="col-md-2"></div>
                </div>
            </div>

        </div>
        <div class="browse-content col-md-9">
            <div *ngIf="(browseState | async).loading" class="loader"></div>
            <div class="row">
                <div class="col-md-6">
                    <p class="product-count">Following Books Found</p>
                </div>
                <div class="col-md-6">
                    <div class="sort">
                        <select name="sortBy" id="sortBy" (change)="selectSort($event.target.value)">
              <option *ngFor="let s of sortBy" [value]="s.value" [selected]="s.value === selectedSort ? true : false">
                {{s.display}}</option>
            </select>
                    </div>


                    <div *ngFor="let e of (browseState | async).errors">
                        <div *ngIf="e.errorEffect == 'FETCH_PRODUCTS' || e.errorEffect == 'FETCH_PRODUCTS_APPEND'" class="alert-warning col-md-12">
                            <div *ngIf="e.error.status === 400 || e.error.status === 401 ">Problem loading products...</div>
                            <div *ngIf="e.error.status === 500 || e.error.status === 0 ">Internal server error! Please contact our support team.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <div class="product row">
                <div class="product-card col-lg-6 col-md-6 col-12" *ngFor="let product of ( browseState | async ).products">
                    <a routerLink="/detail/{{product.url}}/{{product.bookID}}">
                        <img src="https://s3-ap-southeast-1.amazonaws.com/he-public-data/blue-book-hic09def7.png" alt="Book image" [ngClass]="{'gray': (browseState | async).loading}">
                        <hr>
                        <p class="product-name">{{product.title}}</p>
                        <p class="product-detail">{{product.authors}}</p>
                        <div class="row">
                            <div class="col-md-6">
                                <p class="product-name">{{product.average_rating}} &#9733;</p>
                            </div>
                            <div class="col-md-6">
                                <p>Rs {{product.price}} </p>
                            </div>
                        </div>
                    </a>
                </div>

                <div class="product-not-found" *ngIf="(browseState | async).productsCount === 0 && !(browseState | async).loading">
                    <h1>:(</h1>
                    <h3>Sorry, no product found</h3>
                    <p>Try searching again!</p>
                </div>
            </div>


            <div *ngIf="!canFetch" class="row">
                <div class="col-md-12 col-12">
                    <hr>
                </div>
            </div>
        </div>

    </div>

</div>